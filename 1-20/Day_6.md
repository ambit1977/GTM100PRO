**タイトル:**  
未経験から100日後にGTMのプロになる話【Day 6】  
プレビューモードとデバッグの活用 〜タグが動かない時の探偵術〜

---

**概要（リード文）:**  
GTMでタグを設定したのに「なぜか動かない…」そんな時に役立つのがプレビューモード（デバッグツール）です。本日は、タグの動作を正しく確認し、問題を特定するための探偵術を伝授します。これをマスターすれば「タグが発火しない」問題に悩むことはなくなります！

---

## **本文**

### ■ タグが動かない！？ そんな時こそ冷静に

「GTMでタグを設定して公開したのに、Googleアナリティクスにデータが送られていない…？」

GTM初心者のほぼ全員が一度は遭遇するこの現象。焦って設定をいじりまくる前に、一度落ち着きましょう。

「犯人は現場に戻る」と言われるように、タグの動作トラブルの原因はGTMの中にあります。GTMにはタグの動作を可視化する「プレビューモード」という最強のツールが備わっているので、これを使ってじっくり検証していきましょう。

---

### **① GTMのプレビューモードとは？**

プレビューモードとは、**タグの動作をテストできるデバッグツール**のことです。

これを使うと、

✅ どのタグが発火しているか？  
✅ どのトリガーが条件を満たしたか？  
✅ 変数の値は正しく取得できているか？  

をリアルタイムで確認できます。

タグを本番環境に適用する前にテストできるので、マーケターにとって欠かせない機能です。

---

### **② プレビューモードの使い方**

では、実際にプレビューモードを使ってみましょう。

#### **1. GTMのプレビューモードを開く**
1. [Google Tag Manager](https://tagmanager.google.com/) にアクセスし、コンテナを開く。
2. 画面右上の「**プレビュー**」ボタンをクリック。
3. 計測対象のウェブサイトのURLを入力し、「**接続**」をクリック。
4. サイトが新しいタブで開き、GTMのデバッグツール（Tag Assistant）が表示される。

#### **2. タグの発火状況を確認**

デバッグツールの「**Tags**」タブを開くと、

✅ 発火したタグ（Tags Fired）  
✅ 発火しなかったタグ（Tags Not Fired）  

が一覧表示されます。

もし設定したタグが「**Tags Not Fired**」に入っていたら、何か問題があるということです。

---

### **③ タグが発火しない時の原因と対策**

タグが発火しない場合、主に以下の5つの原因が考えられます。

#### **原因1. トリガーの設定ミス**
**チェックポイント:**
- トリガーの条件が適切か？
- 「すべてのページ」ではなく「特定のページ」に限定されていないか？
- クリックトリガーの場合、対象のボタンやリンクが正しく識別されているか？

**対策:**
- 「プレビューモード」でトリガーの発火条件を確認。
- 必要ならトリガーの設定を「すべてのページ」や「すべてのクリック」に変更してテスト。

#### **原因2. 変数の取得ミス**
**チェックポイント:**
- 変数の値が正しく取得できているか？
- 設定した変数が「undefined」になっていないか？

**対策:**
- 「Variables」タブを確認し、変数の値が取得できているかチェック。
- もし取得できていなければ、変数の種類（組み込み変数 or ユーザー定義変数）を見直す。

#### **原因3. dataLayer（データレイヤー）が未定義**
**チェックポイント:**
- `dataLayer.push()` で必要なデータが送信されているか？
- `dataLayer` のデータ構造に間違いはないか？

**対策:**
- デバッグツールの「Data Layer」タブで値を確認。
- `dataLayer` の定義や記述ミスがないか開発者に相談。

#### **原因4. GTMコンテナの公開忘れ**
**チェックポイント:**
- GTMのタグを編集した後、「送信」ボタンを押しているか？

**対策:**
- 編集後は必ず「送信」→「公開」を実行する。
- バージョン履歴を見て、最新の設定が適用されているか確認。

#### **原因5. AdBlockなどの拡張機能が邪魔をしている**
**チェックポイント:**
- ブラウザにAdBlockやGhosteryなどの広告ブロッカーが入っていないか？

**対策:**
- 一時的にブラウザの拡張機能をオフにして確認。
- シークレットモードでテストしてみる。

---

### **④ Googleアナリティクス側でもデータを確認しよう**

GTMのタグが発火していたら、Googleアナリティクス（GA4）にもデータが届いているか確認しましょう。

#### **1. GA4のリアルタイムレポートを開く**
1. [Google Analytics](https://analytics.google.com/) にログイン。
2. 左メニューの「レポート」→「リアルタイム」を開く。
3. 「イベント」セクションに、GTMで送ったデータが表示されるか確認。

もしGTMでタグが発火しているのにGA4にデータが届かない場合、
- 測定ID（G-XXXXXXX）の設定ミス
- Google Signals（シグナル）の影響
- Googleタグ（gtag.js）との競合

などが考えられます。設定を見直しながら、慎重にチェックしましょう。

---

### **■ まとめ 〜GTMのデバッグ力を高めよう！〜**

今回の学びを整理すると、

✅ **プレビューモードでタグの動作を確認する**  
✅ **発火しない場合は「トリガー」「変数」「dataLayer」をチェック**  
✅ **Googleアナリティクス側でもデータが届いているか確認する**  

GTMを使いこなすためには、デバッグ力を鍛えることが不可欠です。タグの動作を正しく理解し、トラブル時にも冷静に対処できるようにしていきましょう。

---

### **■ 明日の予告 〜コンテナの公開とバージョン管理〜**

次回は「コンテナの公開」と「バージョン管理」の話。変更履歴を管理しながら、安全にGTMを運用する方法を学びます！

