**タイトル:**  
未経験から100日後にGTMのプロになる話【Day 15】  
GA4のイベント計測（応用編） 〜カスタム定義とデータ活用を極める〜

---

**概要（リード文）:**  
GA4のイベント計測を設定してデータを送信できるようになりました。でも、そのデータをGA4のレポートで活用するには「カスタム定義」が必要です。  
今回は、GA4の「カスタム定義」と「BigQuery連携」を活用して、より詳細なデータ分析を行う方法を解説します！

---

## **本文**

### ■ GA4のデータをカスタマイズする理由

「GTMでイベントを設定したけど、GA4のレポートにデータが表示されない…」  
そんな経験はありませんか？

GA4では、**イベントパラメータを「カスタム定義」として登録** しないと、レポートに反映されない場合があります。

例えば、前回の `cta_click` イベントで以下のパラメータを送信しました。
```json
{
  "event_name": "cta_click",
  "button_text": "お問い合わせ",
  "button_url": "https://example.com/contact"
}
```

この `button_text` や `button_url` をGA4のレポートで分析するには、**カスタムディメンション** として登録する必要があります。

では、実際にカスタム定義を設定してみましょう！

---

### **① GA4でカスタム定義を設定する**

#### **1. GA4の管理画面でカスタム定義を追加**

1. Google Analytics 4の管理画面を開く。
2. 左メニューの「管理」 → 「カスタム定義」をクリック。
3. 「**カスタムディメンションを作成**」をクリック。
4. 以下の情報を入力。
   - **ディメンション名:** `CTA ボタンのテキスト`
   - **範囲:** イベント
   - **イベントパラメータ:** `button_text`
5. 「保存」をクリック。

✅ **これで、`button_text` のデータがGA4のレポートで分析できるようになりました！**

#### **2. GA4のレポートでカスタムディメンションを確認**

1. 左メニューの「レポート」 → 「エクスプローラ」 を開く。
2. 「ディメンションを追加」ボタンをクリックし、`CTA ボタンのテキスト` を選択。
3. 「イベント名」で `cta_click` をフィルタリング。

✅ **どのCTAボタンがどれだけクリックされたか？ をGA4で分析できるようになります！**

---

### **② BigQueryを活用して詳細分析する（上級編）**

GA4はBigQueryと連携できるため、SQLを使ってより詳細なデータ分析が可能になります。

#### **1. BigQuery連携を有効化する**

1. Google Analytics 4の管理画面を開く。
2. 左メニューの「管理」 → 「BigQueryリンク」を選択。
3. 「リンクを追加」ボタンをクリック。
4. BigQueryのプロジェクトを選択し、「データをエクスポート」を有効にする。
5. 「保存」して設定完了。

#### **2. BigQueryでイベントデータを確認する**

BigQueryにGA4のデータがエクスポートされると、SQLを使ってカスタム分析ができます。

例えば、CTAボタンのクリック数をページ別に集計するには、次のSQLを実行します。
```sql
SELECT
  event_name,
  event_bundle_sequence_id,
  event_params.value.string_value AS button_text,
  event_params.value.string_value AS button_url,
  COUNT(*) AS click_count
FROM `your_project_id.analytics_xxxx.events_*`
WHERE event_name = 'cta_click'
GROUP BY button_text, button_url
ORDER BY click_count DESC
```

✅ **GA4のレポートだけでは難しい詳細なデータ分析が可能になります！**

---

### **③ カスタム定義とBigQueryの使い分け**

| 機能 | 使いどころ |
|---|---|
| **カスタム定義（GA4管理画面）** | GA4の標準レポートで分析したいとき |
| **BigQuery連携** | SQLを使ってより詳細なデータ分析を行いたいとき |

✅ **簡単なデータ分析ならGA4のカスタム定義、詳細な分析はBigQueryを活用！**

---

### **■ まとめ 〜カスタム定義を活用してデータを最大限に活かそう！〜**

今回の学びを整理すると…

✅ **GA4のイベントパラメータは「カスタム定義」に登録しないとレポートに表示されない！**  
✅ **カスタムディメンションを設定すれば、GA4のレポートで分析しやすくなる！**  
✅ **BigQueryと連携すれば、SQLを使った高度なデータ分析が可能！**  
✅ **マーケティング施策の改善に役立つデータを、適切に記録・分析しよう！**  

この設定を活用すれば、
- **どのCTAボタンが一番クリックされているか？**
- **購入率が高いボタンのテキストは何か？**
- **特定のユーザー層がどんな行動をしているか？**

といったデータを分析し、施策に活かせるようになります！

---

### **■ 明日の予告 〜スクロール計測の設定〜**

次回は、**「スクロール率の計測」** を設定し、

- **「どこまで読まれているのか？」**
- **「ユーザーがどのポイントで離脱しているのか？」**

を分析する方法を解説します。

明日も引き続き、GTMの実践スキルを磨いていきましょう！

