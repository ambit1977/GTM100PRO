**タイトル:**  
未経験から100日後にGTMのプロになる話【Day 34】  
高度な分析項目のトラッキング 〜「そのデータ、本当に取れてますか？」〜

---

**概要（リード文）:**  
「もっと深いデータ分析をしたい！」  
「ページの表示速度やエラーログ、ユーザーの細かい動きも記録したい！」  
そんなときに活躍するのが **「高度なトラッキング設定」** です。本日は、GTMを活用して「サイトのパフォーマンスデータ」「エラーイベント」「高度なユーザー行動」を計測する方法を解説します！

…今日からあなたも **「マーケティングデータの探偵」** です。見えないデータを可視化し、サイト改善のヒントを見つけ出しましょう！

---

## **本文**

### ■ 基本の計測だけでは足りない？

Googleアナリティクス（GA4）や広告タグを導入するだけでは、
✅ **「どのユーザーが離脱しやすいか？」**  
✅ **「ページの読み込み時間が遅くて影響が出ていないか？」**  
✅ **「JavaScriptエラーが発生していないか？」**  

といった **「高度なデータ」** は取得できません。

こうしたデータを取得することで、**サイトの問題点を特定し、改善策を打つことができる！**  
では、GTMを使って **「高度なトラッキング設定」** を実装していきましょう！

---

### **① ページの表示速度をトラッキングする**

ページの読み込み速度（Page Load Time）は、ユーザー体験（UX）に大きな影響を与えます。

#### **1. カスタムJavaScript変数でページ読み込み時間を取得**

1. GTMの「**変数**」メニューを開く。
2. 「**新規**」をクリックし、変数の種類を「**カスタムJavaScript**」に設定。
3. 以下のコードを入力し、変数名を「JS - Page Load Time」にする。

```javascript
function() {
  return window.performance.timing.loadEventEnd - window.performance.timing.navigationStart;
}
```

4. 保存。

✅ **これで、ページの読み込み時間（ミリ秒単位）を取得できます！**

---

#### **2. GA4のイベントタグで「ページ読み込み時間」を送信**

1. GTMの「**タグ**」メニューを開く。
2. 「**新規**」をクリックし、タグの種類を「**Google アナリティクス: GA4 イベント**」に設定。
3. 「**設定タグを選択**」で、すでに作成したGA4設定タグを選択。
4. 「**イベント名**」を `page_speed` にする。
5. 「イベントパラメータを追加」ボタンをクリックし、
   - **パラメータ名:** `load_time`（値: `{{JS - Page Load Time}}`）
   - **パラメータ名:** `page_url`（値: `{{Page URL}}`）
6. 保存。

✅ **これで、GA4のレポートで「ページの読み込み時間」が分析できるようになります！**

---

### **② JavaScriptエラーをトラッキングする**

ユーザーがサイトを閲覧している間に **「JavaScriptエラーが発生しているか？」** を計測すると、ユーザーの離脱原因を特定できます。

#### **1. カスタムJavaScript変数でエラーを検知**

1. GTMの「**変数**」メニューを開く。
2. 「**新規**」をクリックし、変数の種類を「**カスタムJavaScript**」に設定。
3. 以下のコードを入力し、変数名を「JS - Last JavaScript Error」にする。

```javascript
function() {
  var lastError = window.lastError || "No Errors";
  return lastError;
}
window.onerror = function(message, source, lineno, colno, error) {
  window.lastError = message + " at " + source + ":" + lineno;
};
```

4. 保存。

✅ **これで、最新のJavaScriptエラーの内容を取得できます！**

---

#### **2. GA4のイベントタグでエラー情報を送信**

1. GTMの「**タグ**」メニューを開く。
2. 「**新規**」をクリックし、タグの種類を「**Google アナリティクス: GA4 イベント**」に設定。
3. 「**設定タグを選択**」で、すでに作成したGA4設定タグを選択。
4. 「**イベント名**」を `js_error` にする。
5. 「イベントパラメータを追加」ボタンをクリックし、
   - **パラメータ名:** `error_message`（値: `{{JS - Last JavaScript Error}}`）
   - **パラメータ名:** `page_url`（値: `{{Page URL}}`）
6. 保存。

✅ **これで、JavaScriptエラーをGA4で分析できるようになります！**

---

### **■ まとめ 〜高度なデータ分析でサイトを最適化！〜**

✅ **「ページの読み込み時間」を計測し、GA4でレポート化！**  
✅ **「JavaScriptエラー」を取得し、サイトの技術的な問題を把握！**  
✅ **「プレビューモード」でテストし、問題なければ公開する！**  

これを活用すれば、
- **「ページの読み込みが遅いと離脱率が上がる？」**
- **「特定のブラウザでエラーが発生していないか？」**
- **「コンバージョン率の低下が技術的な問題と関連していないか？」**

といった問題の **「根本原因」** をデータで特定できるようになります！

---

### **■ 明日の予告 〜他ツールとのデータ連携〜**

次回は、**「GTMと他の分析ツール（Google BigQuery・CRMなど）の連携」** を学びます！

