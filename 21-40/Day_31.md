**タイトル:**  
未経験から100日後にGTMのプロになる話【Day 31】  
A/Bテストの計測設定 〜どのバリエーションが勝者なのか？〜

---

**概要（リード文）:**  
「AとB、どっちのデザインの方が売れる？」  
「ボタンの色を変えたらクリック率は上がる？」  
そんな疑問に答えるのが **A/Bテスト** です！  
本日は、GTMを使ってA/Bテストの計測設定を行い、GA4と連携して最適なバリエーションを分析する方法を解説します！

…さて、A/Bテストとは **「どちらが勝者かを決める真剣勝負」** です。マーケターの皆さん、今日からあなたはデータを操る「審判」です！

---

## **本文**

### ■ A/Bテストとは？

A/Bテストとは、**異なる2つ以上のバージョン（AとB）をランダムにユーザーに表示し、どちらがより良い結果を出すかを計測する手法** です。

例えば、
✅ **「CTAボタンの色を赤と青で比較し、どちらがクリックされるか？」**  
✅ **「LPのヘッドラインを変更し、コンバージョン率の変化を見る」**  
✅ **「フォームの入力項目数を減らしたら、送信率が上がるか？」**  

このように、デザインやテキストの違いがユーザーの行動にどう影響するかを **データで判断** できます。

では、GTMを使ってA/Bテストの計測設定をしていきましょう！

---

### **① A/Bテストの仕組みを理解しよう**

A/Bテストでは、以下のような流れでデータを取得します。

1. **ユーザーをA/Bのグループに分ける**（ランダムで振り分ける）
2. **異なるバージョンのページを表示**（例：CTAボタンの色を変える）
3. **どのバージョンがより良い成果を出したかを計測**（GA4にデータ送信）
4. **結果を分析し、勝者を決定！**

このプロセスを **GTM + GA4** で実装していきます。

---

### **② GTMでA/Bテスト用の変数を作成する**

A/Bテストの計測には、ユーザーをA/Bのどちらかに振り分ける **「ランダム変数」** が必要です。

#### **1. JavaScript変数を作成する（ランダムA/B割り振り）**

1. GTMの「**変数**」メニューを開く。
2. 「**新規**」をクリックし、変数の種類を「**カスタムJavaScript**」に設定。
3. 以下のコードを入力し、変数名を「JS - A/Bテストグループ」にする。

```javascript
function() {
  var group = Math.random() < 0.5 ? 'A' : 'B';
  document.cookie = "ab_test=" + group + "; path=/";
  return group;
}
```

4. 保存。

✅ **これで、50%の確率で「A」または「B」のグループにランダムで振り分けられます！**

---

### **③ GA4のイベントタグを作成する（A/Bテストのデータ送信）**

#### **1. GA4のA/Bテストイベントタグを作成**

1. GTMの「**タグ**」メニューを開く。
2. 「**新規**」をクリックし、タグの種類を「**Google アナリティクス: GA4 イベント**」に設定。
3. 「**設定タグを選択**」で、すでに作成したGA4設定タグを選択。
4. 「**イベント名**」を `ab_test` にする。

#### **2. イベントパラメータを設定する**

1. 「イベントパラメータを追加」ボタンをクリック。
2. 以下のパラメータを追加。
   - **パラメータ名:** `test_group`（値: `{{JS - A/Bテストグループ}}`）
   - **パラメータ名:** `page_url`（値: `{{Page URL}}`）
3. 保存。

✅ **これで、ユーザーがどのグループに割り振られたかをGA4に送信できます！**

---

### **④ A/Bテストのタグ発火を制御する（A/Bグループごとに別のタグを発火）**

#### **1. Aグループ用のトリガーを作成**

1. GTMの「**トリガー**」メニューを開く。
2. 「**新規**」をクリックし、トリガーの種類を「**ページビュー**」に設定。
3. 「このトリガーの発火を…」のオプションを「**一部のページビュー**」に変更。
4. 条件として「**JS - A/Bテストグループ が A と等しい**」を設定。
5. 保存。

#### **2. Bグループ用のトリガーを作成**

1. 上記と同様に、新しいトリガーを作成。
2. 条件を「**JS - A/Bテストグループ が B と等しい**」に変更。
3. 保存。

✅ **これで、A/Bグループごとに異なるタグを発火させる設定ができます！**

---

### **⑤ GA4でA/Bテストの結果を分析する**

#### **1. GA4の「エクスプローラ」でデータを分析**

1. GA4の「レポート」→「エクスプローラ」を開く。
2. 「ディメンションを追加」ボタンをクリックし、「test_group」を選択。
3. 「指標」に「コンバージョン率」や「イベント数」を追加。

✅ **どのグループがより良い成果を出したかをGA4で比較できます！**

---

### **■ まとめ 〜A/Bテストでデータドリブンな意思決定を！〜**

✅ **A/Bテストでは「ランダムなグループ分け」が必須！**  
✅ **GTMの「カスタムJavaScript変数」を活用し、ユーザーをA/Bに振り分ける！**  
✅ **GA4のイベントタグを作成し、どのバリエーションが勝者かを計測する！**  
✅ **「プレビューモード」でテストし、問題なければ公開する！**  

これを活用すれば、
- **「サイトのどのデザインが最も効果的か？」**
- **「どのCTAボタンが最もクリックされるか？」**
- **「フォームの短縮でコンバージョン率は上がるのか？」**

など、マーケティング施策の精度を上げることができます！

---

### **■ 明日の予告 〜複数サイトとGTMの管理方法〜**

次回は、**「複数のサイトをGTMで管理する方法」** を学びます！

